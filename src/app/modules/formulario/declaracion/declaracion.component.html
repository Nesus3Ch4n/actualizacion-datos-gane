<div class="minimal-form-container">
  <!-- Header minimalista -->
  <div class="form-header">
    <mat-icon class="header-icon">gavel</mat-icon>
    <h2 class="header-title">Declaraci칩n conflicto de intereses</h2>
  </div>

  <!-- Formulario principal -->
  <form [formGroup]="conflictForm" class="minimal-form">
    
    <!-- Informaci칩n general -->
    <div class="info-section">
      <h3 class="section-title">
        <mat-icon>info</mat-icon>
        Informaci칩n general
      </h3>
      
      <div class="info-description">
        <p class="info-text">
          쯊iene usted, alg칰n tipo de relaci칩n familiar y/o comercial, hasta el cuarto grado de consanguinidad 
          (padres, hijos, hermanos, abuelos, nietos, t칤os, sobrinos o primos), segundo de afinidad 
          (c칩nyuge, cu침ado, suegros o abuelos del c칩nyuge) o primero civil (hijo adoptivo o padre adoptante) 
          con alguna de las partes interesadas de la compa침칤a?
        </p>
      </div>

      <div class="legend-grid">
        <div class="legend-item">
          <strong>I:</strong> Integrantes
        </div>
        <div class="legend-item">
          <strong>AC:</strong> Accionistas
        </div>
        <div class="legend-item">
          <strong>CI:</strong> Colocadores Independientes
        </div>
        <div class="legend-item">
          <strong>P:</strong> Proveedores
        </div>
        <div class="legend-item">
          <strong>A:</strong> Arrendadores
        </div>
        <div class="legend-item">
          <strong>AE:</strong> Aliados Estrat칠gicos
        </div>
        <div class="legend-item">
          <strong>CE:</strong> Colaboradores Empresariales
        </div>
      </div>
    </div>

    <!-- Declaraci칩n principal -->
    <div class="declaration-section">
      <h3 class="section-title">
        <mat-icon>help_outline</mat-icon>
        Declaraci칩n de conflicto
      </h3>
      
      <div class="form-grid">
        <div class="form-column">
          <mat-form-field appearance="outline" class="minimal-field">
            <mat-label>쯊iene alg칰n conflicto de intereses?</mat-label>
            <mat-select formControlName="opcion_conflicto">
              <mat-option value="2">
                <mat-icon>check_circle</mat-icon>
                No
              </mat-option>
              <mat-option value="1">
                <mat-icon>warning</mat-icon>
                S칤
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>assignment</mat-icon>
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Informaci칩n de conflicto (condicional) -->
    <div class="conflict-section" *ngIf="conflictForm.get('opcion_conflicto')?.value === '1'">
      <h3 class="section-title">
        <mat-icon>person_add</mat-icon>
        Detalles del Conflicto
        <span class="info-note">(Agregue las personas con conflicto de intereses)</span>
      </h3>
      
      <div class="form-grid">
        <div class="form-column">
          <mat-form-field appearance="outline" class="minimal-field">
            <mat-label>Nombre completo</mat-label>
            <input matInput formControlName="dconf_nombre" placeholder="Ingrese el nombre completo">
            <mat-icon matSuffix>person</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="minimal-field">
            <mat-label>Parentesco</mat-label>
            <input matInput formControlName="dconf_parentesco" placeholder="Ej: Hermano, T칤o, etc.">
            <mat-icon matSuffix>family_restroom</mat-icon>
          </mat-form-field>
        </div>

        <div class="form-column">
          <mat-form-field appearance="outline" class="minimal-field">
            <mat-label>Tipo de parte interesada</mat-label>
            <mat-select formControlName="dconf_parte">
              <mat-option value="">Seleccione</mat-option>
              <mat-option value="I">
                <mat-icon>business</mat-icon>
                I - Integrantes
              </mat-option>
              <mat-option value="AC">
                <mat-icon>account_balance</mat-icon>
                AC - Accionistas
              </mat-option>
              <mat-option value="CI">
                <mat-icon>person_pin</mat-icon>
                CI - Colocadores Independientes
              </mat-option>
              <mat-option value="P">
                <mat-icon>local_shipping</mat-icon>
                P - Proveedores
              </mat-option>
              <mat-option value="A">
                <mat-icon>home_work</mat-icon>
                A - Arrendadores
              </mat-option>
              <mat-option value="AE">
                <mat-icon>handshake</mat-icon>
                AE - Aliados Estrat칠gicos
              </mat-option>
              <mat-option value="CE">
                <mat-icon>groups</mat-icon>
                CE - Colaboradores Empresariales
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>business</mat-icon>
          </mat-form-field>

          <div class="add-button-container">
            <button mat-flat-button color="accent" type="button" (click)="agregarPersona()" 
                    [disabled]="!isPersonFormValid()" class="add-person-button">
              <mat-icon>add</mat-icon>
              A침adir Persona
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Lista de personas agregadas -->
    <div class="persons-list-section" *ngIf="conflictForm.get('opcion_conflicto')?.value === '1' && personasConflicto.length > 0">
      <h3 class="section-title">
        <mat-icon>group</mat-icon>
        Personas Registradas
      </h3>
      
      <div class="persons-container">
        <div class="person-card" *ngFor="let persona of personasConflicto; let i = index">
          <div class="person-info">
            <div class="person-name">
              <mat-icon>person</mat-icon>
              <span>{{ persona.nombre }}</span>
            </div>
            <div class="person-details">
              <span class="detail-item">
                <mat-icon>family_restroom</mat-icon>
                {{ persona.parentesco }}
              </span>
              <span class="detail-item">
                <mat-icon>business</mat-icon>
                {{ persona.tipoParteInteresada }}
              </span>
            </div>
          </div>
          <button mat-icon-button color="warn" (click)="eliminarPersona(i)" 
                  matTooltip="Eliminar persona" class="delete-button">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </div>

  </form>

  <!-- TEMPORAL: Bot칩n de debugging -->
  <div class="debug-section" style="margin: 20px 0; padding: 10px; background: #f5f5f5; border-radius: 8px;">
    <h4 style="margin: 0 0 10px 0; color: #666;">游댢 Debugging Temporal</h4>
    <button mat-raised-button color="warn" (click)="debugFormulario()" style="margin-right: 10px;">
      <mat-icon>bug_report</mat-icon>
      Ver Datos en Consola
    </button>
    <small style="color: #666;">Haz clic para ver el contenido completo del FormStateService en la consola del navegador</small>
  </div>

  <!-- Botones minimalistas -->
  <div class="form-actions">
    <button mat-stroked-button class="minimal-button secondary" (click)="previous()">
      <mat-icon>arrow_back</mat-icon>
      Atr치s
    </button>
    <button mat-flat-button color="primary" class="minimal-button primary" (click)="validateAndFinish()">
      Finalizar
      <mat-icon>check_circle</mat-icon>
    </button>
  </div>
</div>
